# GameManager.gd
# -------------------------
# Main gameplay controller.
# Handles:
# - Thoughts, Control, Instability
# - Dive & Overclock actions
# - Run progression
# - Prestige (Wake)
# - Offline progress
# - Automation
# - Saving / loading
# Integrates:
# - UpgradeManager
# - DepthMetaSystem
# - PermPerkSystem
# - AbyssPerkSystem
# This is the core game loop brain.

# DepthMetaSystem.gd
# -------------------------
# Handles depth-based meta progression.
# Responsibilities:
# - Stores currency per depth (1â€“15)
# - Stores upgrade levels per depth
# - Provides upgrade definitions
# - Calculates global multipliers
# - Handles multi-currency costs
# Depth upgrades are GLOBAL and permanent.
# Earlier depths remain relevant forever.

# PermPerkSystem.gd
# -------------------------
# Handles permanent perks purchased with Memories.
# Effects persist across all runs.
# Includes:
# - Cost scaling
# - Buy logic
# - Effect calculation
# Used by GameManager to apply permanent bonuses.

# PermPerkRow.gd
# -------------------------
# UI row for a single permanent perk.
# Displays:
# - Name
# - Level
# - Cost
# - Buy button
# Handles:
# - Buy click
# - UI refresh
# - Tooltip display

# PermPageBuilder.gd
# -------------------------
# Dynamically builds the Perm Perks page.
# Instantiates PermPerkRow scenes for each perk id.
# Keeps layout flexible and data-driven.

# DepthUpgradeRow.gd
# -------------------------
# UI row for a single depth upgrade.
# Displays:
# - Upgrade name
# - Description
# - Level
# - Cost (multi-currency)
# - Affordability bar
# Handles:
# - Buy logic
# - Visibility rules
# - Cost formatting

# MetaPanelController.gd
# -------------------------
# Controls the Meta UI panel.
# Pages:
# - Perm perks
# - Depth upgrades
# - Abyss perks
# Handles:
# - Tab switching
# - Depth tab unlocking
# - Page visibility
# - Currency summary

# UpgradeManager.gd
# -------------------------
# Handles run-based upgrades.
# These reset every Wake.
# Affect:
# - Thoughts
# - Instability
# - Overclock
# - Deep dives
# Not permanent.

# OverclockSystem.gd
# -------------------------
# Burst mechanic.
# Temporarily boosts Thoughts at the cost of:
# - Control
# - Higher Instability gain
# Has duration and cooldown logic.

# RiskSystem.gd
# -------------------------
# Controls Instability gain.
# Applies:
# - Clamping
# - Reduction multipliers
# - Corruption modifiers
# Ensures Instability never goes below 0 or above 100.

# AutomationSystem.gd
# -------------------------
# Handles auto-dive and auto-overclock.
# Includes:
# - Safety checks
# - Delay logic
# - Player toggles

# AbyssPerkSystem.gd
# -------------------------
# Late-game perk system unlocked at depth 15.
# Modifies:
# - Starting depth
# - Instability per depth
# - Thoughts & Control bonuses
